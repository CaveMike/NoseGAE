<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="Docutils 0.11: http://docutils.sourceforge.net/" />
<title>More tests</title>
<style type="text/css">

/*
:Author: David Goodger
:Contact: goodger@users.sourceforge.net
:Date: $Date: 2005-12-18 01:56:14 +0100 (Sun, 18 Dec 2005) $
:Revision: $Revision: 4224 $
:Copyright: This stylesheet has been placed in the public domain.

Default cascading style sheet for the HTML output of Docutils.

See http://docutils.sf.net/docs/howto/html-stylesheets.html for how to
customize this style sheet.
*/

body { 
  font-family: verdana, arial, sans-serif;
  font-size: small;
  padding-right: 5em;
 }

/* used to remove borders from tables and images */
.borderless, table.borderless td, table.borderless th {
  border: 0 }

table.borderless td, table.borderless th {
  /* Override padding for "table.docutils td" with "! important".
     The right padding separates the table cells. */
  padding: 0 0.5em 0 0 ! important }

.first {
  /* Override more specific margin styles with "! important". */
  margin-top: 0 ! important }

.last, .with-subtitle {
  margin-bottom: 0 ! important }

.hidden {
  display: none }

a.toc-backref {
  text-decoration: none ;
  color: black }

blockquote.epigraph {
  margin: 2em 5em ; }

dl.docutils dd {
  margin-bottom: 0.5em }

dl.docutils dt {
  font-weight: bold }

div.abstract {
  margin: 2em 5em }

div.abstract p.topic-title {
  font-weight: bold ;
  text-align: center }

div.admonition, div.attention, div.caution, div.danger, div.error,
div.hint, div.important, div.note, div.tip, div.warning {
  margin: 2em ;
  border: medium outset ;
  padding: 1em }

div.admonition p.admonition-title, div.hint p.admonition-title,
div.important p.admonition-title, div.note p.admonition-title,
div.tip p.admonition-title {
  font-weight: bold ;
  font-family: sans-serif }

div.attention p.admonition-title, div.caution p.admonition-title,
div.danger p.admonition-title, div.error p.admonition-title,
div.warning p.admonition-title {
  color: red ;
  font-weight: bold ;
  font-family: sans-serif }

div.compound .compound-first, div.compound .compound-middle {
  margin-bottom: 0.5em }

div.compound .compound-last, div.compound .compound-middle {
  margin-top: 0.5em }

div.dedication {
  margin: 2em 5em ;
  text-align: center ;
  font-style: italic }

div.dedication p.topic-title {
  font-weight: bold ;
  font-style: normal }

div.figure {
  margin-left: 2em ;
  margin-right: 2em }

div.footer, div.header {
  clear: both;
  font-size: smaller }

div.line-block {
  display: block ;
  margin-top: 1em ;
  margin-bottom: 1em }

div.line-block div.line-block {
  margin-top: 0 ;
  margin-bottom: 0 ;
  margin-left: 1.5em }

div.sidebar {
  margin-left: 1em ;
  border: medium outset ;
  padding: 1em ;
  background-color: #ffffee ;
  width: 40% ;
  float: right ;
  clear: right }

div.sidebar p.rubric {
  font-family: sans-serif ;
  font-size: medium }

div.system-messages {
  margin: 5em }

div.system-messages h1 {
  color: red }

div.system-message {
  border: medium outset ;
  padding: 1em }

div.system-message p.system-message-title {
  color: red ;
  font-weight: bold }

div.topic {
  margin: 2em }

h1.section-subtitle, h2.section-subtitle, h3.section-subtitle,
h4.section-subtitle, h5.section-subtitle, h6.section-subtitle {
  margin-top: 0.4em }

h1.title {
  text-align: center }

h2.subtitle {
  text-align: center }

hr.docutils {
  width: 75% }

img.align-left {
  clear: left }

img.align-right {
  clear: right }

ol.simple, ul.simple {
  margin-bottom: 1em }

ol.arabic {
  list-style: decimal }

ol.loweralpha {
  list-style: lower-alpha }

ol.upperalpha {
  list-style: upper-alpha }

ol.lowerroman {
  list-style: lower-roman }

ol.upperroman {
  list-style: upper-roman }

p.attribution {
  text-align: right ;
  margin-left: 50% }

p.caption {
  font-style: italic ;
  color: #aaa;
  margin-top: -6px;
  padding-top: 0px;
  margin-left: 2em;
  font-size: smaller;
}

p.credits {
  font-style: italic ;
  font-size: smaller }

p.label {
  white-space: nowrap }

p.rubric {
  font-weight: bold ;
  font-size: larger ;
  color: maroon ;
  text-align: center }

p.sidebar-title {
  font-family: sans-serif ;
  font-weight: bold ;
  font-size: larger }

p.sidebar-subtitle {
  font-family: sans-serif ;
  font-weight: bold }

p.topic-title {
  font-weight: bold }

pre.address {
  margin-bottom: 0 ;
  margin-top: 0 ;
  font-family: serif ;
  font-size: 100% }

pre.literal-block, pre.doctest-block {
  margin-left: 2em ;
  margin-right: 2em ;
  background-color: #eeeeee }

span.classifier {
  font-family: sans-serif ;
  font-style: oblique }

span.classifier-delimiter {
  font-family: sans-serif ;
  font-weight: bold }

span.interpreted {
  font-family: sans-serif }

span.option {
  white-space: nowrap }

span.pre {
  white-space: pre }

span.problematic {
  color: red }

span.section-subtitle {
  /* font-size relative to parent (h1..h6 element) */
  font-size: 80% }

table.citation {
  border-left: solid 1px gray;
  margin-left: 1px }

table.docinfo {
  margin: 2em 4em }

table.docutils {
  margin-top: 0.5em ;
  margin-bottom: 0.5em }

table.footnote {
  border-left: solid 1px black;
  margin-left: 1px }

table.docutils td, table.docutils th,
table.docinfo td, table.docinfo th {
  padding-left: 0.5em ;
  padding-right: 0.5em ;
  vertical-align: top }

table.docutils th.field-name, table.docinfo th.docinfo-name {
  font-weight: bold ;
  text-align: left ;
  white-space: nowrap ;
  padding-left: 0 }

h1 tt.docutils, h2 tt.docutils, h3 tt.docutils,
h4 tt.docutils, h5 tt.docutils, h6 tt.docutils {
  font-size: 100% }

tt.docutils {
  background-color: #eeeeee }

ul.auto-toc {
  list-style-type: none }

pre.response.pass, .pass
{ 
  background: #dfd; !important
 }

pre.response.fail, .fail
{ 
  background: #faa; !important
}

li.fail
{ 
  background: #fff;
}

li.fail a
{ 
  color: #f55;
  font-weight: bold;
}

tt.request.method
{ 
  font-weight: bold;
}

.contents
{ 
  float: right;
  font-size: smaller;
  border: 1px solid #ddd;
  padding-left: 1em;
  padding-right: 1em;
}

.contents ul
{ 
  padding-left: 1em;
  margin-right: .5em;
  margin-left: 0;
}

.contents p.topic-title
{ 
  padding-top: 1ex;
}

</style>
</head>
<body>
<div class="document" id="more-tests">
<h1 class="title">More tests</h1>

<p>This document contains edge-case tests that don't add anything to the
end-user documentation.</p>
<div class="section" id="bugs">
<h1>Bugs</h1>
<div class="section" id="issue-2">
<h2>Issue 2</h2>
<p>sys.modules should be available inside the sandbox.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
test.test_sys_modules_available ... ok
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 1 test in ...s
&lt;BLANKLINE&gt;
OK
</pre>
<!--  -->
</div>
<div class="section" id="tests-in-packages">
<h2>Tests in packages</h2>
<p>You can organize your files with tests under the main app package, like this:</p>
<pre class="literal-block">
.
|-- app.yaml
|-- helloworld
|   |-- __init__.py
|   `-- tests
|       |-- __init__.py
|       |-- test.py
|-- index.yaml
`-- main.py
</pre>
<p>And the test package and modules under it will be outside the sandbox.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
helloworld.tests.test.test_index ... ok
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 1 test in ...s
&lt;BLANKLINE&gt;
OK
</pre>
<!--  -->
</div>
<div class="section" id="issue-7">
<h2>Issue 7</h2>
<p>The modules loaded by any sandboxed module are added to the shared module set,
so that they persist between entries into the sandbox. This prevents weird
import errors when you have more than one test module, one of which imports a
module from a sandboxed package.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
tests.test.test_index ... ok
tests.test_models.test ... ok
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 2 tests in ...s
&lt;BLANKLINE&gt;
OK
</pre>
<!--  -->
</div>
<div class="section" id="test-that-logging-still-works">
<h2>Test that logging still works</h2>
<p>After SDK 1.2.5 dev_appserver got a bit more aggressive about adding log handlers.
NoseGAE has to silence the logs and this makes sure logging still works from apps.
See Issue 25 for details.  NOTE: I'm not sure what the &quot;strop&quot; import error is about.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
tests.test.test_that_fails ... FAIL
&lt;BLANKLINE&gt;
======================================================================
FAIL: tests.test.test_that_fails
----------------------------------------------------------------------
Traceback (most recent call last):
...
AssertionError: this fails so that logging output can be inspected
...
root: INFO: I saw a penguin at the zoo and it told me a secret.
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 1 test in ...s
&lt;BLANKLINE&gt;
FAILED (failures=1)
</pre>
<!--  -->
</div>
<div class="section" id="issue-42-task-queues">
<h2>Issue 42 - Task Queues</h2>
<p>Create a test outside the app-engine path using some taskqueue facility (for e.g. a task queue with another name than 'default'). Running those tests with nose even with --gae-application set correctly they will fail, telling you that said queue isn't existing.</p>
<p>Without the fix in NoseGAE which involves setting up the root path for queue storage, the UnknownQueueError exception will be raised.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
test.test_index ... ok
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 1 test in ...s
&lt;BLANKLINE&gt;
OK
</pre>
<!--  -->
</div>
<div class="section" id="issue-13-users-get-current-user-not-working">
<h2>Issue 13 - users.get_current_user() not working</h2>
<p>Create an app that calls users.get_current_user() -- it fails because the stubs did not set up the environ.</p>
<pre class="literal-block">
<tt class="request method docutils literal">nosetests <span class="pre">-v</span> <span class="pre">--with-gae</span></tt>
</pre>
<pre class="response pass literal-block">
test.test_index ... ok
&lt;BLANKLINE&gt;
----------------------------------------------------------------------
Ran 1 test in ...s
&lt;BLANKLINE&gt;
OK
</pre>
<!--  -->
</div>
</div>
</div>
</body>
</html>
